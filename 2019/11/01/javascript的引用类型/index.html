<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>引用类型 | 阿海blog</title>
    <meta name="description" content="博客日志">
    
    
    <link rel="preload" href="/myblog/assets/css/0.styles.efd142df.css" as="style"><link rel="preload" href="/myblog/assets/js/app.cf86b132.js" as="script"><link rel="preload" href="/myblog/assets/js/3.02a0c52b.js" as="script"><link rel="preload" href="/myblog/assets/js/5.b253e24d.js" as="script"><link rel="preload" href="/myblog/assets/js/13.b3171814.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.ab463270.js"><link rel="prefetch" href="/myblog/assets/js/11.98394e95.js"><link rel="prefetch" href="/myblog/assets/js/12.0cedc2d4.js"><link rel="prefetch" href="/myblog/assets/js/14.4fc0975f.js"><link rel="prefetch" href="/myblog/assets/js/15.9e838aa3.js"><link rel="prefetch" href="/myblog/assets/js/16.a3e98fdb.js"><link rel="prefetch" href="/myblog/assets/js/17.58e49973.js"><link rel="prefetch" href="/myblog/assets/js/18.55c963ed.js"><link rel="prefetch" href="/myblog/assets/js/19.e0748b9a.js"><link rel="prefetch" href="/myblog/assets/js/20.2e201121.js"><link rel="prefetch" href="/myblog/assets/js/21.dd7f3965.js"><link rel="prefetch" href="/myblog/assets/js/22.550ae3a4.js"><link rel="prefetch" href="/myblog/assets/js/23.0304d1fa.js"><link rel="prefetch" href="/myblog/assets/js/24.d772f9d4.js"><link rel="prefetch" href="/myblog/assets/js/25.aeb549d9.js"><link rel="prefetch" href="/myblog/assets/js/26.9518bd84.js"><link rel="prefetch" href="/myblog/assets/js/27.5c6bb228.js"><link rel="prefetch" href="/myblog/assets/js/28.483a6167.js"><link rel="prefetch" href="/myblog/assets/js/29.b53658b9.js"><link rel="prefetch" href="/myblog/assets/js/30.cb07eae1.js"><link rel="prefetch" href="/myblog/assets/js/31.738d8c28.js"><link rel="prefetch" href="/myblog/assets/js/32.c3fe5ae4.js"><link rel="prefetch" href="/myblog/assets/js/33.5ddd149a.js"><link rel="prefetch" href="/myblog/assets/js/34.85a7f6e4.js"><link rel="prefetch" href="/myblog/assets/js/35.f775e353.js"><link rel="prefetch" href="/myblog/assets/js/36.d811fd43.js"><link rel="prefetch" href="/myblog/assets/js/37.44048c34.js"><link rel="prefetch" href="/myblog/assets/js/38.c27302f4.js"><link rel="prefetch" href="/myblog/assets/js/39.ee40026a.js"><link rel="prefetch" href="/myblog/assets/js/4.d89400b6.js"><link rel="prefetch" href="/myblog/assets/js/40.6daca118.js"><link rel="prefetch" href="/myblog/assets/js/41.a768339f.js"><link rel="prefetch" href="/myblog/assets/js/42.bb599b1a.js"><link rel="prefetch" href="/myblog/assets/js/43.45dac5e6.js"><link rel="prefetch" href="/myblog/assets/js/44.be9e1fd5.js"><link rel="prefetch" href="/myblog/assets/js/45.69464a5b.js"><link rel="prefetch" href="/myblog/assets/js/46.4c6a2a65.js"><link rel="prefetch" href="/myblog/assets/js/47.acaae1eb.js"><link rel="prefetch" href="/myblog/assets/js/48.04fdd823.js"><link rel="prefetch" href="/myblog/assets/js/49.e2586f45.js"><link rel="prefetch" href="/myblog/assets/js/50.1386c3af.js"><link rel="prefetch" href="/myblog/assets/js/51.27480573.js"><link rel="prefetch" href="/myblog/assets/js/52.af125c64.js"><link rel="prefetch" href="/myblog/assets/js/53.54f8e36f.js"><link rel="prefetch" href="/myblog/assets/js/54.7ddf154f.js"><link rel="prefetch" href="/myblog/assets/js/55.712ebb58.js"><link rel="prefetch" href="/myblog/assets/js/56.5c8902a6.js"><link rel="prefetch" href="/myblog/assets/js/57.794b2964.js"><link rel="prefetch" href="/myblog/assets/js/58.aaef7782.js"><link rel="prefetch" href="/myblog/assets/js/59.aadc710c.js"><link rel="prefetch" href="/myblog/assets/js/6.00468cf7.js"><link rel="prefetch" href="/myblog/assets/js/60.58311edb.js"><link rel="prefetch" href="/myblog/assets/js/61.e734d238.js"><link rel="prefetch" href="/myblog/assets/js/62.95ce8054.js"><link rel="prefetch" href="/myblog/assets/js/63.b9926306.js"><link rel="prefetch" href="/myblog/assets/js/64.1bee1444.js"><link rel="prefetch" href="/myblog/assets/js/65.4ceca4a2.js"><link rel="prefetch" href="/myblog/assets/js/66.c3f05729.js"><link rel="prefetch" href="/myblog/assets/js/67.6b39435c.js"><link rel="prefetch" href="/myblog/assets/js/68.73e9dd74.js"><link rel="prefetch" href="/myblog/assets/js/7.35d7f06d.js"><link rel="prefetch" href="/myblog/assets/js/8.90ceae7a.js"><link rel="prefetch" href="/myblog/assets/js/9.6519f079.js"><link rel="prefetch" href="/myblog/assets/js/vuejs-paginate.b4ae6543.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.efd142df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/myblog/myblog/" class="nav-link home-link">阿海blog
        </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/myblog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/myblog/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/myblog/myblog/" class="nav-link mobile-home-link">阿海blog
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/myblog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/myblog/tag/" class="nav-link">Tags</a></li></ul></div></div></div></section> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content content__default"><h1 id="引用类型"><a href="#引用类型" aria-hidden="true" class="header-anchor">#</a> 引用类型</h1> <p>引用类型是一种数据结构，它在别的语言中被称为类，但是在 JavaScript 中实际上并没有类，虽然提供了很多类似“类”的语法（class 关键字），但很多书籍都认为这不是一个好的事情</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span>
</code></pre></div><p><img src="/myblog/assets/img/2019-11-04_092632.ba4c20ba.png" alt="引用类型"></p> <p>这里通过 new 关键字来生成一个 Date 引用类型的实例，可以发现它的原型上有很多公有的方法，引用类型的实例也被成为引用类型的值，是一个对象</p> <p>ECMAScript 原生的引用类型</p> <ul><li><p>Object</p></li> <li><p>Array</p></li> <li><p>Date</p></li> <li><p>RegExp</p></li> <li><p>Function</p></li> <li><p>Error</p></li></ul> <h2 id="object"><a href="#object" aria-hidden="true" class="header-anchor">#</a> Object</h2> <p>Object 是最常见的引用类型，原生的引用类型都继承自 Object 类型,可以通过点表示法和方括号表示法来访问对象,前者书写更加简单，后者可以支持一些特殊语法和表达式，但是书写比较复杂（同时由于要解析表达式，性能也稍慢）</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 通过字面量表示法来创建对象，比 new 更加简便</span>

obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span>
obj<span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
obj<span class="token punctuation">[</span><span class="token string">&quot;c d&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// 方括号可以支持点表示法不支持的语法</span>

<span class="token comment">// 方括号也可以支持表达式</span>
<span class="token comment">// ps：对象中含有数字的属性会被转为字符串</span>
obj<span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
obj<span class="token punctuation">[</span>obj<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token comment">// 如果属性是一个对象，会转为原始类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// {&quot;3&quot;: 4, &quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c d&quot;: 3, &quot;[object Object]&quot;: 5}</span>
</code></pre></div><p>可以使用 new 关键字来动态生成一个对象，另外它不仅限于普通的对象，还可以生成包装类型的对象</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span>
<span class="token keyword">let</span> wrappedStr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 等同于 new String(&quot;abc&quot;)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> str<span class="token punctuation">)</span> <span class="token comment">// 'string'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> wrappedStr<span class="token punctuation">)</span> <span class="token comment">// 'object'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wrappedStr <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token comment">// true 注意 String 首字母是大写，代表是 String 包装类型而非 string 基本类型</span>
</code></pre></div><p>wrappedStr 这个包装对象看上去和基本类型相似，但它是一个对象，进一步说是 String 包装类型的实例，这个我们放到之后讲</p> <h2 id="array"><a href="#array" aria-hidden="true" class="header-anchor">#</a> Array</h2> <p>Array 类型可以通过 new 关键字调用或者字面量表达式来生成实例，当使用 new 并传入一个参数时，会创建参数长度的稀疏数组（由空单元组成的数组），当传入两个以上参数时，会创建由参数组成的数组</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span> <span class="token comment">//[ &lt;10 empty items&gt; ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [ 10, 20 ]`</span>
</code></pre></div><p>数组有一个 length 的内部属性，它是可以被修改的，可以利用这个特点快速清空数组和增加数组长度</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// 使用字面量创建数组</span>

arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// []</span>

arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [ &lt;100 empty items&gt; ] 创建的都是空单元的稀疏数组，不推荐直接使用</span>
</code></pre></div><p>当尝试将 Array 类型转换为字符串时（这可能会存在于隐式转换中），默认会调用数组原型上的 toString 方法，它会依次调用数组中每个元素的 toString 方法 (null 和 undefined 是例外，它们会直接转为空字符串)</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">undefined</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Object],123,()=&gt;{},&quot; 最后以逗号结尾，因为 undefined 变成空字符串了</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">[</span>arr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// { '[object Object],123,()=&gt;{},': &quot;&quot; } 当对象的属性是一个对象，JS 会将其转为字符串再作为其属性，这里就发生了隐式转换</span>
</code></pre></div><h3 id="栈和队列"><a href="#栈和队列" aria-hidden="true" class="header-anchor">#</a> 栈和队列</h3> <p>JavaScript 中的数组既可以表示栈也可以表示队列，当使用 pop 方法时会视为栈，将栈顶也就是数组最后一个元素弹出，当使用 shift 方法时会视为队列，将队首也就是数组第一个元素出列</p> <p>而添加数组元素的方法 push,unshift 后会返回数组的长度</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4 表示数组长度为4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5 表示数组长度为5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4 返回最后一个元素4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0 返回第一个元素0</span>
</code></pre></div><h3 id="sort"><a href="#sort" aria-hidden="true" class="header-anchor">#</a> sort</h3> <p>通过调用 sort 方法可以给数组元素进行排序，但是这个方法有点特殊，<strong>sort 会调用每个数组元素的 toString 方法</strong>，这会导致排序的结果和预期的有出入</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [ 1, 10, 100, 2, 20, 200 ]</span>
</code></pre></div><p>调用 sort 会将每个元素都转为字符串，最终会给 &quot;1&quot;, &quot;2&quot;, &quot;10&quot;, &quot;20&quot;&quot;10&quot;, &quot;20&quot;, &quot;100&quot;, &quot;200&quot; 排序，而在上一章中我介绍到，JavaScript 中两个字符串比较，会逐个比较每个字符的字符串的编码，如果当前字符编码相同，则依次比较下一位，一旦某个字符大于另一个字符则直接返回结果，不会再往后比较</p> <p>这里之所以 10 排在 2 的前面，是因为在比较 &quot;10&quot; 和 &quot;2&quot; 时，先比较第一位也就是字符串 1 和字符串 2，因为字符串 2 的编码大于字符串 1，所以就会直接退出比较，就会产生 &quot;10&quot; &lt; &quot;2&quot; 的结果</p> <p><img src="/myblog/assets/img/2019-11-04_093640.3ebf0493.png" alt="比较"></p> <p>这并不是一个奇怪的 BUG，而是 sort 默认使用字典序进行排序,维基百科中是这么解释字典序的</p> <p>如果不用默认的排序方式，可以通过给 sort 方法传入一个比较函数</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [ 1, 2, 10, 20, 100, 200 ]</span>
</code></pre></div><p>sort 是一个高阶函数，即支持传入一个函数作为参数，每次比较时都会调用传入的参数，其中参数 a 和 b 就是两个准备进行比较的字符串，在上一章还提到过，如果两个字符串相减会转为 Number 类型再进行计算，这样就可以避免字符串类型比较造成的问题</p> <p>同时如果传入的函数返回值大于 0 ，则 b 会排在 a 前面，小于 0 则 a 会排在 b 前面，等于 0 则不变，根据这个特点可以控制返回数组是顺序还是倒序</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">]</span>

<span class="token comment">// [ 200, 100, 20, 10, 2, 1 ] 倒序数组</span>
<span class="token comment">// 第一次比较时 b 为 2，a 为 1，由于返回值大于 0，所以 b 将排在 a 的前面，变成 [2,1]，以此类推</span>
<span class="token comment">// 注意是插入排序</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> b <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>  
</code></pre></div><p><strong>sort 它会修改原数组，而不是新生成一个数组作为返回值</strong>，使用前请考虑清楚是否需要对原数组进行拷贝</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> b <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [ 200, 100, 20, 10, 2, 1 ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [ 200, 100, 20, 10, 2, 1 ] 原数组被修改了！</span>
</code></pre></div><h3 id="concat"><a href="#concat" aria-hidden="true" class="header-anchor">#</a> concat</h3> <p>concat 会将参数添加到数组末尾，不像 sort 会修改原数组，它会创建一个当前数组的副本（浅拷贝），所以相对比较安全
另外如果参数包含数组，会给数组进行一层降维</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [ 1, 2, 3, 4, 5, 6, 7, [ 8, 9 ] ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [1,2,3]</span>
</code></pre></div><p>当然现在更推荐使用 ES6 的扩展运算符，写法更加简洁，和 concat 实现的功能类似，同样也会浅拷贝数组</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// [ 1, 2, 3, 4, 5, 6, 7, [ 8, 9 ] ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [1,2,3]</span>
</code></pre></div><h3 id="slice"><a href="#slice" aria-hidden="true" class="header-anchor">#</a> slice</h3> <p>slice 会基于参数来切割数组，它同样会浅拷贝数组，当传入不同参数会有不同功能</p> <ul><li><p>不传参数会直接返回一个浅拷贝后的数组</p></li> <li><p>只有第一个参数时，会返回第一个参数的下标到数组最后的数组，参数超过最大下标则返回空数组</p></li> <li><p>当传入两个参数时，会返回第一个参数至第二个参数 - 1 下标的数组</p></li> <li><p>如果第二个参数小于第一个参数（非负数），返回空数组</p></li> <li><p>参数含有负数则会加上数组长度再应用上述规则</p></li></ul> <p><strong>slice 方法可以将类数组转为真正的数组</strong></p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4, 5] 浅拷贝原数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//  [3, 4, 5]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [3]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// []</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [3, 4] 等同于 arr.slice(2, -1 + 5)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> length<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;a&quot;]</span>
</code></pre></div><h3 id="splice"><a href="#splice" aria-hidden="true" class="header-anchor">#</a> splice</h3> <p>splice 可以认为是 push, pop, unshift, shift 的结合，并且能够指定插入/删除的位置，非常强大，但它传入但参数也更为复杂，所以一般只有在操作数组具体下标元素的时候才会使用，同时<strong>它也会修改原数组</strong>，使用时请注意
同时 splice 会返回一个数组，如果是使用它的删除功能，则返回的数组中会包含被删除的元素，来看一些比较特殊的例子</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [2, 3, 4, 5]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [3,4,5]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [2]</span>
</code></pre></div><p>第一次调用 splice 会在数组下标为 0 的位置删除一个元素，它的返回值就是被删除的元素 1，同时打印数组，会发现 splice 修改了原来的数组，原数组的第一个元素被删除了</p> <p>第二次调用 splice 只传了一个参数，表示删除从数组下标为 1 的位置至数组最后一个元素，因为此时数组为 [2,3,4,5]，所以删除下标从 1 到最后的元素 3，4，5，并作为 splice 的返回值，最后原数组就只包含元素 2 了</p> <h3 id="indexof"><a href="#indexof" aria-hidden="true" class="header-anchor">#</a> indexOf</h3> <p>indexOf 方法会返回参数在数组中的下标，不存在则返回 -1，一个特殊情况就是 NaN，如果使用 indexOf 判断 NaN 是否在数组中，永远会返回 -1</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">NaN</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// -1</span>
</code></pre></div><p>解决这个问题可以使用 ES6 的 includes 方法，它会返回一个布尔值，而非目标元素下标，同时它可以判断 NaN 是否存在与目标数组中</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">NaN</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>我个人习惯使用 includes 这个 api，因为日常中很多情况只需要知道参数是否存在于数组中，所以返回布尔值就足够了，如果遇到需要返回下标，或者从数组的指定位置搜索参数可以使用 indexOf</p> <h3 id="reverse"><a href="#reverse" aria-hidden="true" class="header-anchor">#</a> reverse</h3> <p>ES5 为数组提供了 5 个迭代方法，它们都是高阶函数，第一个参数是一个函数，第二个参数是函数的 this 指向</p> <ul><li><p>every</p></li> <li><p>filter</p></li> <li><p>forEach</p></li> <li><p>map</p></li> <li><p>some</p></li></ul> <p>对一个空数组无论参数中的函数返回什么，调用 some 都会返回 false， 调用 every 都会返回 true</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="reduce"><a href="#reduce" aria-hidden="true" class="header-anchor">#</a> reduce</h3> <p>reduce 也就是归并方法，个人认为是数组中最高级的使用方法，用的好可以实现一些非常强大的功能，这里举个的例子：多维数组扁平化</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">flat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">depth <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>depth <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> arr
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 需要用 call 绑定 this 值，否则会指向 window</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>pre<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">flat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span>depth<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>关于 reduce 还有一个关于下标的注意点，当 reduce 只传一个参数时，index 的下标是从 1 也就是数组第二个元素开始的（如果此时数组为空会报错），当 reduce 传入第二个参数，会作为遍历的起始值，此时 index 的下标就从 0 也就是数组第一个元素开始</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
    <span class="token keyword">return</span> pre <span class="token operator">+</span> cur
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 1</span>
<span class="token comment">// 2</span>
<span class="token comment">// 3</span>

arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
    <span class="token keyword">return</span> pre <span class="token operator">+</span> cur
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 0</span>
<span class="token comment">// 1</span>
<span class="token comment">// 2</span>
<span class="token comment">// 3</span>
</code></pre></div><h3 id="regexp"><a href="#regexp" aria-hidden="true" class="header-anchor">#</a> RegExp</h3> <p>正则表达式可以使用构造函数动态生成，也可以使用字面量快速生成，由于正则表达式实例也是对象，所以也会有属性，常用的属性有</p> <ul><li><p>global: 是否设置了 g 标志，即开启全局匹配</p></li> <li><p>ignoreCase: 是否设置了 i 标志，即忽略大小写</p></li> <li><p>dotAll (ES9) : 是否设置了 s （并非 d ）标志，即使用 . 可以匹配任何单个字符，可以理解为 [\s\S]（默认 . 不会匹配换行符，回车符，分隔符等）</p></li> <li><p>lastIndex: 开始搜索下一个匹配项的字符位置，从 0 算起</p></li> <li><p>source: 当前正则表达式的字符串表示</p></li></ul> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/\[abc]/ig</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>

<span class="token keyword">let</span> reg2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\[abc]'</span><span class="token punctuation">,</span> <span class="token string">&quot;ig&quot;</span><span class="token punctuation">)</span> <span class="token comment">// RegExp 第二个参数为正则标志</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>reg2<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;[abc]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;[abc]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/myblog/assets/img/2019-11-04_095040.ef423de9.png" alt="正则">
reg 和 reg2 实现的功能是相同的，第一种更简便，第二种更灵活，需要结合实际情况灵活使用</p> <p>另外还有一个比较重要的点，可以看到 2 个正则对象的 lastIndex 都为 5，此时如果继续用 test 方法匹配会返回 false</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/\[abc]/ig</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>

<span class="token keyword">let</span> reg2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\[abc]'</span><span class="token punctuation">,</span> <span class="token string">&quot;ig&quot;</span><span class="token punctuation">)</span> <span class="token comment">// RegExp 第二个参数为正则标志</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>reg2<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;[abc]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;[abc]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;[abc]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;[abc]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/myblog/assets/img/2019-11-04_095209.e8672abc.png" alt="zz">
之所以出现这样的情况是因为正则对象内部保存的 lastIndex 属性会决定下次正则匹配的位置，第一次用 test 方法匹配成功后，lastIndex 从 0 变成 5，同时下次会从参数的第 6 个元素开始匹配，此时发现匹配不到任何元素，所以会返回 false ，并将 lastIndex 重置为默认值 0</p> <p>关于正则其实非常复杂，深入会涉及到状态机，回溯，贪婪匹配等知识点，写的不好会影响系统的性能，但是如果能搞懂其中的奥秘，写出优质的正则，能够很大程度上解放劳动力，例如给整个项目替换部分代码，另外 Vue 的模版字符串编译也是依赖正则的匹配来提取属性，自定义指令等</p> <p><img src="/myblog/assets/img/2019-11-04_095301.d7e01cd9.png" alt="ZZ"></p> <h3 id="function"><a href="#function" aria-hidden="true" class="header-anchor">#</a> Function</h3> <p><strong>函数也是对象</strong>，而函数的函数名只是作为一个指向函数的指针，这个我在上一章也提到过，JavaScript 不允许直接操作对象的内存空间，开发中操作的都是指向堆内存对象的指针</p> <p>可以通过 new 关键字来动态生成一个函数</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> func <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;console.log(a)&quot;</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>
</code></pre></div><p>Function 函数作为构造函数时，至少接受一个参数，当只传入一个参数时，会直接将参数作为函数体，当传入超过一个函数时，会将最后一个参数作为函数体，之前的所有参数会作为生成的函数的参数</p> <p>通过 new 动态生成函数优点在于更加灵活，例如 Vue 的编译器最终会将字符串通过 new Function 传入 code 代码并执行</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/compiler/to-function.js:11</span>
<span class="token keyword">function</span> <span class="token function">createFunction</span> <span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> errors</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> err<span class="token punctuation">,</span> code <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> noop
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="重载"><a href="#重载" aria-hidden="true" class="header-anchor">#</a> 重载</h2> <p>JavaScript 中的函数没有重载，但是可以实现一定程度上的参数重载</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;background-color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// color</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;background-color&quot;</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这里是一个 jquery 的代码，当调用 css 方法传入一个参数时，会返回 p 节点当前的背景颜色，如果传入 2 个参数，会设置背景颜色，css 方法的功能取决于传入参数的个数，原理是利用函数参数个数来判断返回属性还是设置属性</p> <h3 id="函数声明，函数表达式"><a href="#函数声明，函数表达式" aria-hidden="true" class="header-anchor">#</a> 函数声明，函数表达式</h3> <p>当 JavaScript 在加载数据时（也可以理解为进入一个新的环境或者说上下文），会优先读取环境中的所有函数声明，并且这是在加载代码之前执行的操作，而当所有准备工作完成后，才会逐行执行代码，也就是说当代码执行到函数表达式时，函数才会被真正执行</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 函数表达式</span>
<span class="token keyword">const</span> <span class="token function-variable function">func2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 函数声明</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行顺序：func 声明 -&gt; func 执行 -&gt; func2 声明 -&gt; func2 执行</p> <p>在进入全局环境之前，func 由于&quot;函数声明提升&quot;被提升到最前面执行，随后再是执行整个代码，所以上面代码并不会报错，fun2 是函数表达式，如果将 func2 执行的代码放到 func2 声明之前，就会发生错误，因为函数表达式不会被提升
关于函数声明和函数表达式还有一些小细节：</p> <ul><li><p>如果在全局环境中使用函数声明的形式创建函数，那么它会被当作全局函数</p></li> <li><p>函数表达式可以理解为创建一个匿名函数，然后将匿名函数赋值给声明的变量</p></li> <li><p>可以同时使用函数声明和函数表达式</p></li></ul> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 在函数内部 sum 指向的是右边的词法名称，而非左边的 sum 变量</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>右边</strong>的 sum 会作为匿名函数的“词法名称”，这种情况常用于自身的递归，如果没有这个词法名称函数只能使用 arguments.callee 方法来实现递归（无法使用左边的 sum 变量），而函数内部的 arguments 对象由于性能问题已不推荐使用，所以如果有递归的需求，推荐给匿名函数添加一个词法名称，另外需要注意的是，词法名称是常量，函数内部无法修改</p> <p>每日一题中就有该知识点的考察，以下是某个解题者的解释</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 内部作用域，会先去查找是有已有变量b的声明，有就直接赋值20，确实有了呀。发现了具名函数 function b(){}，拿此b做赋值；</span>
   <span class="token comment">// IIFE的函数无法进行赋值（内部机制，类似const定义的常量），所以无效。</span>
  <span class="token comment">// （这里说的“内部机制”，想搞清楚，需要去查阅一些资料，弄明白IIFE在JS引擎的工作方式，堆栈存储IIFE的方式等）</span>
    b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Function b]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10，不是20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="length"><a href="#length" aria-hidden="true" class="header-anchor">#</a> length</h3> <p>函数还有一个 length 属性，它表示的是函数希望接受的形参个数</p> <blockquote><p>形参的数量不包括剩余参数个数，仅包括第一个具有默认值之前的参数个数</p></blockquote> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token operator">...</span>c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>func<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token keyword">function</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token parameter">a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>func2<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 0</span>

<span class="token keyword">function</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>func2<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><p>可以看到第一个函数的 length 属性为 2，因为后面是剩余参数，不计算在 length 长度中，而第二个因为参数 a 含有默认值，所以会返回 a 之前的参数，同时因为 a 之前没有参数所以最终返回 0，第三个例子中参数 b 有默认值，所以返回 b 之前的参数个数，也就是 1</p> <h3 id="apply-call"><a href="#apply-call" aria-hidden="true" class="header-anchor">#</a> apply / call</h3> <p><strong>函数在运行时</strong>还会生成一个 this 对象，它可以理解为指针，在一般情况下，this 指向的是调用该函数的对象，而使用 函数 apply / call 方法可以改变 this 的指向（再次强调，因为函数也是对象，所以也会有属性和方法）</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 1,2,3 {a:1}</span>
<span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// String{&quot;123&quot;} {a:1}</span>
<span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 1,2,3 {a:1}</span>
</code></pre></div><p>apply 和 call 的区别在于 apply 的第一个参数为即将执行的函数的 this 值，第二个参数为数组或者类数组，代表即将执行的函数的参数，而 call 第一个参数相同，第二个至最后的参数代表即将执行的参数</p> <p>即 apply 会用数组保存函数的参数，call 则会平铺，除此以外没有区别（虽然 call 方法必须要将函数参数平铺，但是可以使用 ES6 的扩展运算符将其写为数组的形式，现在更推荐使用 call ）</p> <p>另外 apply 和 call 都会让第一个参数进行装箱操作，即如果传入一个基本类型且基本类型有包装类型（下文会详细解释包装类型），则 this 的值为传入的基本类型的包装类型，例子中将 string 类型变成了 String 的包装类型</p> <p>在<strong>非严格模式下</strong>，如果 this 的值为 null / undefined，则自动会指向全局的 window 对象，而严格模式则不会有这个行为（值得注意的是这个并非 apply / call 的行为）</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// window 对象</span>


<span class="token keyword">function</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;use strict&quot;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">func2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre></div><h3 id="bind"><a href="#bind" aria-hidden="true" class="header-anchor">#</a> bind</h3> <p>bind 和 apply / call 方法类似，也是一个用来改变函数 this 指向的方法，区别在于 bind 会返回一个被绑定 this 指向函数，而 apply / call 则直接会运行它，如果需要绑定 this 指向，又不想立即执行的话，可以使用 bind 方法，等需要使用时再调用绑定后的函数</p> <p>bind 第一个参数为 this 指向，第二个至以后的参数为给绑定的函数预先传入的参数，预置参数的函数通常也被称为<strong>偏函数</strong></p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> boundFunc <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token function">boundFunc</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// {a:1} 1,2,3,4</span>
</code></pre></div><p>通过 bind 预先传入了参数 1，2，当调用绑定后的函数时，它会预先传入 1，2 作为第一第二个参数，此时再给函数传入参数，会作为第三第四的参数，最终打印 1，2，3，4</p> <h2 id="基本包装类型"><a href="#基本包装类型" aria-hidden="true" class="header-anchor">#</a> 基本包装类型</h2> <p>为了便于操作基本类型的值，ECMAScript 提供了 3 个特殊的引用类型：</p> <ul><li><p>Boolean</p></li> <li><p>Number</p></li> <li><p>String
它们有别于 boolean,number,string ，可以发现它们首字母是大写，意味着它们是引用类型，也就是对象</p></li></ul> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token string">&quot;some text&quot;</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>我们要知道，基本类型是没有任何方法的，也就是说 &quot;some text&quot; 这个字符串是没有 substring 这个方法的，那为什么第二行代码不会报错呢？</p> <p>原因在于，当第二行代码访问保存着字符串的变量 s1 时，会处于一种读取模式，尝试从内存中读取这个字符串的值，而在读取模式中访问字符串时，会有以下操作</p> <ul><li><p>创建 String 类型的一个实例</p></li> <li><p>在实例上调用 substring 方法</p></li> <li><p>还原成基本最初的基本类型</p></li></ul> <p>这样理解</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token string">&quot;some text&quot;</span>
<span class="token comment">// 读取模式</span>
s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;some text&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
s1 <span class="token operator">=</span> <span class="token string">&quot;some text&quot;</span> <span class="token comment">// 还原成基本类型</span>
</code></pre></div><p>String 包装类型作为引用类型，它是含有 substring 方法的，所以需要将基本类型转换为包装类型才能执行方法，并将返回的结果赋值给变量 s2，最后再将 s1 还原成一开始的基本类型</p> <p>另外<strong>自动创建</strong> (并非主动调用 new 创建的对象) 的包装类型只会存在于代码执行瞬间，然后立即销毁</p> <p>直接调用 String 函数生成的是基本类型，而使用 new 关键字将 String 作为构造函数使用，则生成的是包装类型</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;abc&quot; string 基本类型</span>
<span class="token keyword">let</span> wrappedStr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span> <span class="token comment">// String {&quot;abc&quot;} String 包装类型</span>

<span class="token keyword">let</span> boolean <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// true boolean 基本类型</span>
<span class="token keyword">let</span> wrappedBoolean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// Boolean {true} Boolean 包装类型</span>

<span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// 123 number 基本类型</span>
<span class="token keyword">let</span> wrappedNumber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// Number {123} Number 包装类型</span>
</code></pre></div><h2 id="number-包装类型"><a href="#number-包装类型" aria-hidden="true" class="header-anchor">#</a> Number 包装类型</h2> <p>toFixed 是 Number 包装类型下的一个方法，用于按照指定小数位返回数值的字符串表示，当数值小于传入当参数，会四舍五入</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;10.00&quot;</span>

<span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token number">1.68</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1.7&quot;</span>
但是使用 toFixed 时需要考虑到 Javascript 的小数的精度问题

<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">1.335</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1.33&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1.3349999999999999644...&quot;</span>
</code></pre></div><p>事实上数字 1.335 在语言底层并不是真的以 1.335 来存储的，通过 toFixed 方法返回小数点后 50 位可以发现，1.335 真正的值为 1.3349999… 之后就是无限的循环，由于 JS 最多能表示的精度的长度是 16，所有的小数都只会精确到小数点后 16 位同时自动凑整，所以就进位之后就得到了 1.335</p> <p>由于代表的真实数字是 1.3349999…，所以 toFixed 四舍五入后的结果也就是 1.33 了，因为下一位是 4 被舍去了</p> <h2 id="string-包装类型"><a href="#string-包装类型" aria-hidden="true" class="header-anchor">#</a> String 包装类型</h2> <h3 id="slice-2"><a href="#slice-2" aria-hidden="true" class="header-anchor">#</a> slice</h3> <p>slice 方法同时可以使用于数组类型和 String 包装类型，具体的特点可以看上面的 Array 章节</p> <h3 id="indexof-2"><a href="#indexof-2" aria-hidden="true" class="header-anchor">#</a> indexOf</h3> <p>indexOf 方法同时可以使用于数组类型和 String 包装类型，它会从第一个位置开始遍历，寻找参数在字符串（数组）中的位置并返回下标，同时它还接受第二个参数用于在指定的位置之后开始寻找</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span>
<span class="token comment">// 从下标 6 的位置开始寻找字符串 o</span>
<span class="token comment">// 但返回值仍相对于整个字符串的位置</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>
</code></pre></div><p>尽管 ES6 有 includes 和 find 之类更强大的方法去寻找元素，但是如果需要从某个指定位置开始寻找元素，使用 indexOf 会更加的方便，以下例子会返回字符串中单词 e 的所有下标</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    React makes it painless to create interactive UIs.
     Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes
</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> pos <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>pos <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span>
    pos <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">,</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [6,14,25,34,37,42,49,62,73,77,85,94,122,132,138,149,156,159,169,183,190,208]</span>
</code></pre></div><h3 id="trim"><a href="#trim" aria-hidden="true" class="header-anchor">#</a> trim</h3> <p>trim 方法可以去除字符串首尾的空格，对于一些表单的输入是不允许有空格的，可以使用 trim 来去除，同时在 ES10 中，还有 trimStart 和 trimEnd 这两种方法，分别去除字符串前面和后面的空格</p> <h3 id="replace"><a href="#replace" aria-hidden="true" class="header-anchor">#</a> replace</h3> <p>replace 方法可以用来根据参数替换字符串，第一个参数可以是字符串也可以是正则，第二个参数可以是字符串也可以是函数</p> <blockquote><p>str.replace(regexp|substr, newSubStr|function)</p></blockquote> <p>当参数都是字符串时，只是简单的在 str 中找到第一个参数第一次出现的位置，并替换成第二个参数</p> <p>当第一个参数是正则时，会替换和正则匹配的字符串，同时如果正则中含有 g 标志，会进行全局搜索，当第一次匹配到对应字符串后，不再停止匹配，而是继续往后搜索是否仍有可替换的字符串</p> <p>同时第二个参数还可以传入函数，匹配到的字符串会替换为函数的返回值，函数的引入使得 replace 方法更加的灵活</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'l'</span><span class="token punctuation">,</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hexlo world&quot; 只将第一个 l 替换为 x</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/l/</span><span class="token punctuation">,</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hexlo world&quot; 同上</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/l/g</span><span class="token punctuation">,</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hexxo worxd&quot; 通过给正则添加全局搜索的标志符，可以实现全局替换</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/l/</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span>index<span class="token punctuation">,</span>str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token comment">// 'l' 匹配的子串</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token comment">// 2 匹配到的子字符串在原字符串中的偏移量</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 'hello world' 被匹配的原字符串</span>
    <span class="token keyword">return</span> <span class="token string">'q'</span> <span class="token comment">// 返回字符串 q 代表将第一个匹配到的字符串 l 替换为 q</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;heqlo world&quot;</span>
</code></pre></div><p>另外如果第一个正则含有捕获组，那么第二个参数还可以拿到前面正则中的捕获组，更多详情可以查看 MDN</p> <h3 id="split"><a href="#split" aria-hidden="true" class="header-anchor">#</a> split</h3> <p>关于 split 方法用来分割字符串，除了我们常用的传入一个字符串外，其实 split 还支持传入一个正则作为参数，<strong>如果是一个包含捕获组的正则表达式</strong>，会将捕获组也放入最终返回的数组中</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/(l)/</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [ 'he', 'l', '', 'l', 'o wor', 'l', 'd' ]</span>
</code></pre></div><p>可以看到这里不仅通过分隔符 'l' 将字符串分割，还将分隔符也保存在了数组中</p> <h2 id="单体内置对象"><a href="#单体内置对象" aria-hidden="true" class="header-anchor">#</a> 单体内置对象</h2> <p>事实上，并没有所谓的全局变量或全局函数，所有在全局作用域中定义的属性和函数，都是 Global 对象的属性，包括原生的引用类型都是 Global 对象的属性， Global 对象一般不允许被直接访问</p> <p>之所以是 Global 对象而不是 window 对象，是因为 window 对象只在浏览器中存在，在 node 环境下，全局对象为 global，而在 webworker 中全局对象为 self，它们虽然都不是 Global 对象，但是都作为承担它的对象而存在</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 在 node 环境运行以下代码</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span> <span class="token comment">// node 中的全局对象 global</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// 报错 window 对象不存在</span>

<span class="token comment">// 在 webworker 中不允许操作 DOM，也没有 window 对象</span>
</code></pre></div></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#object" title="Object">Object</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#array" title="Array">Array</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#栈和队列" title="栈和队列">栈和队列</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#sort" title="sort">sort</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#concat" title="concat">concat</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#slice" title="slice">slice</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#splice" title="splice">splice</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#indexof" title="indexOf">indexOf</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#reverse" title="reverse">reverse</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#reduce" title="reduce">reduce</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#regexp" title="RegExp">RegExp</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#function" title="Function">Function</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#重载" title="重载">重载</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#函数声明，函数表达式" title="函数声明，函数表达式">函数声明，函数表达式</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#length" title="length">length</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#apply-call" title="apply / call">apply / call</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#bind" title="bind">bind</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#基本包装类型" title="基本包装类型">基本包装类型</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#number-包装类型" title="Number 包装类型">Number 包装类型</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#string-包装类型" title="String 包装类型">String 包装类型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#slice-2" title="slice">slice</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#indexof-2" title="indexOf">indexOf</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#trim" title="trim">trim</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#replace" title="replace">replace</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#split" title="split">split</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#单体内置对象" title="单体内置对象">单体内置对象</a></div></div></div></div> <footer class="footer" data-v-0d113134><div class="footer-left-wrap" data-v-0d113134><ul class="contact" data-v-0d113134><li class="contact-item" data-v-0d113134><a href="https://github.com/ulivz" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-0d113134><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-0d113134></path></svg>
          
        </a></li><li class="contact-item" data-v-0d113134><a href="https://twitter.com/_ulivz" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-0d113134><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-0d113134></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-0d113134><ul class="copyright" data-v-0d113134><li class="copyright-item" data-v-0d113134><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134>Privacy Policy</a></li><li class="copyright-item" data-v-0d113134><a href="/myblog/2019/11/01/javascript%E7%9A%84%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/.html" class="nav-link" data-v-0d113134>MIT Licensed | Copyright © 2018-present Vue.js</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.cf86b132.js" defer></script><script src="/myblog/assets/js/3.02a0c52b.js" defer></script><script src="/myblog/assets/js/5.b253e24d.js" defer></script><script src="/myblog/assets/js/13.b3171814.js" defer></script>
  </body>
</html>
